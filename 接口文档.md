# 接口文档

在每个接口上，用标记*的表示需要用户进行登录，也就是在header中携带userid和token。

所有返回值都携带code（数字类型）和msg（字符串类型），所有的错误code都小于0。

# /user 用户管理

### /user/signup 注册 [POST]

入参：

| 字段        | 类型    | 说明   | 限制                                                         |
| ----------- | ------- | ------ | ------------------------------------------------------------ |
| username    | string  | 用户名 | 50个字符以内，不可为空，不能包括非图像字符                   |
| nickname    | string  | 昵称   | 50个字符以内                                                 |
| password    | string  | 密码   | 50个字符以内，必须要有至少一个大写字母、一个小写字母、一个数字，不能含有非ASCII字符及不可见字符 |
| email       | string? | 邮箱   | 邮箱形式合法，不超过100字符                                  |
| description | string  | 描述   | 小于1024字符                                                 |

### /user/login 登录 [POST]

入参：

| 字段     | 类型   | 说明   | 限制                                                         |
| -------- | ------ | ------ | ------------------------------------------------------------ |
| username | string | 用户名 | 50个字符以内，不可为空，不能包括非图像字符                   |
| password | string | 密码   | 50个字符以内，必须要有至少一个大写字母、一个小写字母、一个数字，不能含有非ASCII字符及不可见字符 |

出参：

header将携带token（标识）、userid（用户ID）、username（用户名称），都为string类型。

| 字段     | 类型   | 说明 | 限制         |
| -------- | ------ | ---- | ------------ |
| nickname | string | 昵称 | 50个字符以内 |

### /user/logout 登出 [DELETE]*

无入参

### /user/modify 修改信息 [POST]*

入参：

| 字段        | 类型    | 说明 | 限制                                        |
| ----------- | ------- | ---- | ------------------------------------------- |
| nickname    | string? | 昵称 | 需要修改则传入，50个字符以内                |
| email       | string? | 邮箱 | 需要修改则传入，邮箱形式合法，不超过100字符 |
| description | string? | 描述 | 需要修改则传入，小于1024字符                |

### /user/query 查询信息 [GET]

入参：

| 字段     | 类型                          | 说明   | 限制                           |
| -------- | ----------------------------- | ------ | ------------------------------ |
| username | string?                       | 用户名 | 需要查询则传入，50个字符以内   |
| userId   | string \| number \| undefined | 用户ID | 需要查询则传入，需要是合法整数 |

username和userid只能传入一个，同时传入视为失败。

出参：

| 字段        | 类型    | 说明     | 限制                                       |
| ----------- | ------- | -------- | ------------------------------------------ |
| userId      | string  | 用户ID   | 合法整数                                   |
| username    | string  | 用户名   | 50个字符以内，不可为空，不能包括非图像字符 |
| nickname    | string  | 昵称     | 50个字符以内                               |
| email       | string? | 邮箱     | 邮箱形式合法，不超过100字符                |
| description | string  | 描述     | 小于1024字符                               |
| createdTime | string  | 创建时间 | ISO8601标准时间格式                        |
| updatedTime | string  | 更新时间 | ISO8601标准时间格式                        |

### /user/query_id 查询ID信息 [GET]

入参：

| 字段   | 类型                                     | 说明   | 限制                         |
| ------ | ---------------------------------------- | ------ | ---------------------------- |
| userId | string \| number \| string[] \| number[] | 用户ID | 需要是合法整数或其组成的数组 |

username和userid只能传入一个，同时传入视为失败。

出参：

data是一个数组，里面每项有以下内容（这可能不遵循入参的顺序）：

| 字段        | 类型    | 说明     | 限制                                       |
| ----------- | ------- | -------- | ------------------------------------------ |
| userId      | string  | 用户ID   | 合法整数                                   |
| username    | string  | 用户名   | 50个字符以内，不可为空，不能包括非图像字符 |
| nickname    | string  | 昵称     | 50个字符以内                               |
| email       | string? | 邮箱     | 邮箱形式合法，不超过100字符                |
| description | string  | 描述     | 小于1024字符                               |
| createdTime | string  | 创建时间 | ISO8601标准时间格式                        |
| updatedTime | string  | 更新时间 | ISO8601标准时间格式                        |

### /user/search 搜索用户 [GET]

入参：

| 字段     | 类型   | 说明 | 限制         |
| -------- | ------ | ---- | ------------ |
| nickname | string | 昵称 | 50个字符以内 |

出参：

data是一个数组，里面每项有以下内容：

| 字段        | 类型    | 说明     | 限制                                       |
| ----------- | ------- | -------- | ------------------------------------------ |
| userId      | string  | 用户ID   | 合法整数                                   |
| username    | string  | 用户名   | 50个字符以内，不可为空，不能包括非图像字符 |
| nickname    | string  | 昵称     | 50个字符以内                               |
| email       | string? | 邮箱     | 邮箱形式合法，不超过100字符                |
| description | string  | 描述     | 小于1024字符                               |
| createdTime | string  | 创建时间 | ISO8601标准时间格式                        |
| updatedTime | string  | 更新时间 | ISO8601标准时间格式                        |

